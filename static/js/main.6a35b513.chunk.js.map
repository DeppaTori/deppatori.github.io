{"version":3,"sources":["components/UserSelect.js","actions.js","containers/UserSelectContainer.js","components/RepositoryList.js","containers/RepositoryListContainer.js","components/App.js","reducers.js","configureStore.js","index.js"],"names":["UserSelect","_this$props","this","props","value","options","userOnChange","refreshOnClick","isFetching","react_default","a","createElement","onClick","e","preventDefault","onChange","target","map","option","key","Component","SELECT_USER","INVALIDATE_USER","REQUEST_POST","RECEIVE_POST","fetchRepositories","user","dispatch","type","requestPost","fetch","concat","then","response","json","error","console","log","repositories","receivedAt","Date","now","receivePost","fetchPostIfNeeded","getState","state","repositoriesByUser","didInvalidate","shouldFetchPosts","UserSelectContainer","connect","selectedUser","selectUser","invalidateUser","RepositoryList","style","opacity","repository","id","name","RepositoryListContainer","_ref","lastUpdated","FetchApp","containers_UserSelectContainer","containers_RepositoryListContainer","fetchApp","combineReducers","arguments","length","undefined","action","Object","assign","defineProperty","loggerMiddleware","createLogger","preloadedState","store","createStore","applyMiddleware","thunkMiddleware","render","es","App","document","getElementById"],"mappings":"gOAiCeA,mLA5BH,IAAAC,EAC2DC,KAAKC,MAA7DC,EADHH,EACGG,MAAMC,EADTJ,EACSI,QAAQC,EADjBL,EACiBK,aAAaC,EAD9BN,EAC8BM,eAAeC,EAD7CP,EAC6CO,WACjD,OACIC,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,UAAKP,GACLK,EAAAC,EAAAC,cAAA,UAAQC,QAAS,SAAAC,GACbA,EAAEC,iBACFP,EAAeH,KAFnB,WAIAK,EAAAC,EAAAC,cAAA,UAAQP,MAAOA,EAAOW,SAAU,SAAAF,GAAC,OAAEP,EAAaO,EAAEG,OAAOZ,SAEjDC,EAAQY,IAAI,SAACC,GAAD,OACRT,EAAAC,EAAAC,cAAA,UAAQP,MAAOc,EAAQC,IAAKD,GACvBA,MAKjBT,EAAAC,EAAAC,cAAA,YAAOH,EAAW,aAAa,YArBlBY,oBCFZC,EAAc,cACdC,EAAkB,kBAClBC,EAAe,eACfC,EAAe,eAgC5B,SAASC,EAAkBC,GACvB,OAAO,SAASC,GAGZ,OAFAA,EAlBD,SAAqBD,GACxB,MAAO,CACHE,KAAKL,EACLG,QAeSG,CAAYH,IAEdI,MAAK,gCAAAC,OAAiCL,EAAjC,WACXM,KACG,SAAAC,GAAQ,OAAEA,EAASC,QACnB,SAAAC,GAAK,OAAEC,QAAQC,IAAI,mBAAmBF,KAEzCH,KACG,SAAAE,GAAI,OAAEP,EAnBX,SAAqBD,EAAKQ,GAC7B,MAAO,CACHN,KAAKJ,EACLE,OACAY,aAAaJ,EACbK,WAAWC,KAAKC,OAcGC,CAAYhB,EAAKQ,OAiBrC,SAASS,EAAkBjB,GAC9B,OAAO,SAACC,EAASiB,GAEb,GAfR,SAA0BC,EAAMnB,GAE5B,IAAMY,EAAeO,EAAMC,mBAAmBpB,GAC9C,OAAIY,IAEKA,EAAa9B,YAGX8B,EAAaS,cAOjBC,CAAiBJ,IAAWlB,GAC3B,OAAOC,EAASF,EAAkBC,KC7D9C,IA4BeuB,EAFaC,YA1BJ,SAAAL,GAAO,IAEpBM,EAAmCN,EAAnCM,aACA3C,GADmCqC,EAAtBC,mBACoBK,IACrC,CAAE3C,YAAW,EAAM8B,aAAa,KAD5B9B,WAIP,MAAO,CACHJ,MAAMyC,EAAMM,aACZ3C,WAAWA,IAIQ,SAAAmB,GACvB,MAAO,CACHrB,aAAa,SAAAoB,GACTC,EDhBL,SAAoBD,GACvB,MAAO,CACHE,KAAKP,EACLK,QCaa0B,CAAW1B,IACpBC,EAASgB,EAAkBjB,KAE/BnB,eAAe,SAACmB,GACZC,EDbL,SAAwBD,GAC3B,MAAO,CACHE,KAAKN,EACLI,QCUa2B,CAAe3B,IACxBC,EAASgB,EAAkBjB,OAKXwB,CAA4ClD,GCbzDsD,mLAfH,IAAArD,EAC8BC,KAAKC,MAAhCmC,EADHrC,EACGqC,aAAa9B,EADhBP,EACgBO,WACpB,OACIC,EAAAC,EAAAC,cAAA,OAAK4C,MAAO,CAAEC,QAAShD,EAAa,GAAM,IACtCC,EAAAC,EAAAC,cAAA,UACK2B,EAAarB,IAAI,SAAAwC,GAAU,OACxBhD,EAAAC,EAAAC,cAAA,MAAIQ,IAAKsC,EAAWC,IAAKD,EAAWE,iBAP/BvC,aCiBdwC,EAFiBV,YAdR,SAAAL,GAAQ,IAErBM,EAAmCN,EAAnCM,aAFqBU,EAEchB,EAAtBC,mBAC6CK,IAC9D,CAAE3C,YAAW,EAAK8B,aAAa,IAD3B9B,EAHqBqD,EAGrBrD,WAAWsD,EAHUD,EAGVC,YAGlB,MAAO,CACHX,eACAb,aARwBuB,EAGEvB,aAM1B9B,aACAsD,gBAIwBZ,CAAyBI,GCL1CS,EARE,kBACbtD,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,gBACAF,EAAAC,EAAAC,cAACqD,EAAD,CAAqB3D,QAAS,CAAC,UAAU,aACzCI,EAAAC,EAAAC,cAACsD,EAAD,+BCqDR,IAEeC,EAFEC,YAAgB,CAACrB,mBAjBlC,WAA4C,IAAhBD,EAAgBuB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAV,GAAGG,EAAOH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAExC,OADAlC,QAAQC,IAAIQ,GACL0B,EAAO3C,MACV,KAAKN,EACL,KAAKC,EACL,KAAKC,EACD,OAAOgD,OAAOC,OAAO,GAAG5B,EAAjB2B,OAAAE,EAAA,EAAAF,CAAA,GACFD,EAAO7C,KAtCxB,WAIS,IAJWmB,EAIXuB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAJiB,CACtB5D,YAAW,EACXuC,eAAc,EACdT,aAAa,IACfiC,EAAOH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACL,OAAOC,EAAO3C,MACV,KAAKN,EACD,OAAOkD,OAAOC,OAAO,GAAG5B,EAAM,CAC1BE,eAAc,IAEtB,KAAKxB,EAED,OAAOiD,OAAOC,OAAO,GAAG5B,EAAM,CAC1BrC,YAAW,EACXuC,eAAc,IAEtB,KAAKvB,EAED,OAAOgD,OAAOC,OAAO,GAAG5B,EAAM,CAC1BrC,YAAW,EACXuC,eAAc,EACdT,aAAaiC,EAAOjC,aACpBwB,YAAYS,EAAOhC,aAG3B,QACI,OAAOM,GAYWY,CAAWZ,EAAM0B,EAAO7C,MAAM6C,KAEpD,QACI,OAAO1B,IAOkCM,aA1DrD,WAA6C,IAAvBN,EAAuBuB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAjB,UAAUG,EAAOH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACzC,OAAOC,EAAO3C,MACV,KAAKP,EACD,OAAOkD,EAAO7C,KAClB,QACI,OAAOmB,cCFb8B,EAAmBC,yBCCzB,IDCuCC,ECDjCC,EDEKC,YACHb,EACAW,EACAG,YAAgBC,IAAgBN,ICHxCO,iBACIzE,EAAAC,EAAAC,cAACwE,EAAA,EAAD,CAAUL,MAAOA,GACbrE,EAAAC,EAAAC,cAACyE,EAAD,OAEJC,SAASC,eAAe","file":"static/js/main.6a35b513.chunk.js","sourcesContent":["import React,{Component} from 'react'\r\n\r\nclass UserSelect extends Component{\r\n  \r\n\r\n    render(){\r\n        const {value,options,userOnChange,refreshOnClick,isFetching} = this.props\r\n        return(\r\n            <div>\r\n            <h1>{value}</h1>\r\n            <button onClick={e=>{\r\n                e.preventDefault()\r\n                refreshOnClick(value)\r\n            }}>Refresh</button>\r\n            <select value={value} onChange={e=>userOnChange(e.target.value)}>\r\n                {\r\n                    options.map((option)=>(\r\n                        <option value={option} key={option}>\r\n                            {option}\r\n                        </option>\r\n                    ))\r\n                }\r\n            </select>\r\n            <span>{isFetching?\"Loading...\":\"\"}</span>\r\n            \r\n            </div>\r\n        )\r\n    }\r\n  \r\n}\r\n\r\n\r\n\r\nexport default UserSelect","export const SELECT_USER = 'SELECT_USER'\r\nexport const INVALIDATE_USER = 'INVALIDATE_USER'\r\nexport const REQUEST_POST = 'REQUEST_POST'\r\nexport const RECEIVE_POST = 'RECEIVE_POST'\r\n\r\nexport function selectUser(user){\r\n    return {\r\n        type:SELECT_USER,\r\n        user\r\n    }\r\n}\r\n\r\nexport function invalidateUser(user){\r\n    return {\r\n        type:INVALIDATE_USER,\r\n        user\r\n    }\r\n}\r\n\r\nexport function requestPost(user){\r\n    return {\r\n        type:REQUEST_POST,\r\n        user\r\n    }\r\n}\r\n\r\nexport function receivePost(user,json){\r\n    return {\r\n        type:RECEIVE_POST,\r\n        user,\r\n        repositories:json,\r\n        receivedAt:Date.now()\r\n    }\r\n}\r\n\r\nfunction fetchRepositories(user){\r\n    return function(dispatch){\r\n        dispatch(requestPost(user))\r\n\r\n        return fetch(`https://api.github.com/users/${user}/repos`)\r\n        .then(\r\n            response=>response.json(),\r\n            error=>console.log('An error occured',error)\r\n        )\r\n        .then(\r\n            json=>dispatch(receivePost(user,json))\r\n        )\r\n    }\r\n}\r\n\r\nfunction shouldFetchPosts(state,user){\r\n  \r\n    const repositories = state.repositoriesByUser[user];\r\n    if(!repositories){\r\n        return true\r\n    }else if(repositories.isFetching){\r\n        return false\r\n    }else{\r\n        return repositories.didInvalidate\r\n    }\r\n}\r\n\r\nexport function fetchPostIfNeeded(user){\r\n    return (dispatch,getState)=>{\r\n\r\n        if(shouldFetchPosts(getState(),user)){\r\n            return dispatch(fetchRepositories(user))\r\n        }\r\n    }\r\n}\r\n\r\n","import React from 'react'\r\nimport UserSelect from '../components/UserSelect'\r\nimport {connect} from 'react-redux'\r\nimport {fetchPostIfNeeded,selectUser,invalidateUser} from '../actions'\r\n\r\nconst mapStateToProps = state=>{\r\n    \r\n    const {selectedUser,repositoriesByUser} = state\r\n    const {isFetching} = repositoriesByUser[selectedUser] \r\n    || { isFetching:false,repositories:[]}\r\n \r\n\r\n    return {\r\n        value:state.selectedUser,\r\n        isFetching:isFetching\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch =>{\r\n    return {\r\n        userOnChange:user=>{\r\n            dispatch(selectUser(user))\r\n            dispatch(fetchPostIfNeeded(user))\r\n        },\r\n        refreshOnClick:(user)=>{\r\n            dispatch(invalidateUser(user))\r\n            dispatch(fetchPostIfNeeded(user))\r\n        }\r\n    }\r\n}\r\n\r\nconst UserSelectContainer = connect(mapStateToProps,mapDispatchToProps)(UserSelect)\r\n\r\nexport default UserSelectContainer\r\n","import React,{Component} from 'react'\r\n\r\nclass RepositoryList extends Component{\r\n    render(){\r\n        const {repositories,isFetching} = this.props\r\n        return (\r\n            <div style={{ opacity: isFetching ? 0.5 : 1 }}>\r\n                <ul>\r\n                    {repositories.map(repository=>(\r\n                        <li key={repository.id}>{repository.name}</li>\r\n                    ))}\r\n                </ul>\r\n            </div>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nexport default RepositoryList","import {connect} from 'react-redux'\r\nimport RepositoryList from '../components/RepositoryList';\r\n\r\nconst mapStateToProps = state =>{\r\n\r\n    const {selectedUser,repositoriesByUser} = state\r\n    const {isFetching,lastUpdated,repositories} = repositoriesByUser[selectedUser] \r\n    || { isFetching:true,repositories:[]}\r\n \r\n    return {\r\n        selectedUser,\r\n        repositories,\r\n        isFetching,\r\n        lastUpdated\r\n    }\r\n}\r\n\r\nconst RepositoryListContainer = connect(mapStateToProps)(RepositoryList)\r\n\r\nexport default RepositoryListContainer","import React from 'react'\r\nimport UserSelectContainer from '../containers/UserSelectContainer';\r\nimport RepositoryListContainer from '../containers/RepositoryListContainer';\r\n\r\nconst FetchApp = ()=>(\r\n    <div>\r\n        <p>App</p>\r\n        <UserSelectContainer options={['octocat','octokit']} />\r\n        <RepositoryListContainer />\r\n    </div>\r\n)\r\n\r\nexport default FetchApp","import {REQUEST_POST,RECEIVE_POST,SELECT_USER,INVALIDATE_USER} from './actions'\r\nimport { combineReducers } from 'redux';\r\n\r\nfunction selectedUser(state='octocat',action){\r\n    switch(action.type){\r\n        case SELECT_USER:\r\n            return action.user\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\nfunction repository(state={\r\n    isFetching:false,\r\n    didInvalidate:false,\r\n    repositories:[]\r\n},action){\r\n    switch(action.type){\r\n        case INVALIDATE_USER:\r\n            return Object.assign({},state,{\r\n                didInvalidate:true,\r\n            })\r\n        case REQUEST_POST:\r\n         \r\n            return Object.assign({},state,{\r\n                isFetching:true,\r\n                didInvalidate:false,\r\n            })\r\n        case RECEIVE_POST:\r\n            \r\n            return Object.assign({},state,{\r\n                isFetching:false,\r\n                didInvalidate:false,\r\n                repositories:action.repositories,\r\n                lastUpdated:action.receivedAt\r\n            })\r\n           \r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\nfunction repositoriesByUser(state={},action){\r\n    console.log(state);\r\n    switch(action.type){\r\n        case INVALIDATE_USER:\r\n        case REQUEST_POST:\r\n        case RECEIVE_POST:\r\n            return Object.assign({},state,{\r\n                [action.user]:repository(state[action.user],action)\r\n            }) \r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nconst fetchApp = combineReducers({repositoriesByUser,selectedUser})\r\n\r\nexport default fetchApp\r\n\r\n","import {createLogger} from 'redux-logger'\r\nimport {createStore,applyMiddleware} from 'redux'\r\nimport fetchApp from './reducers';\r\nimport thunkMiddleware from 'redux-thunk'\r\n\r\n\r\nconst loggerMiddleware = createLogger()\r\n\r\nexport default function configureStore(preloadedState){\r\n    return createStore(\r\n        fetchApp,\r\n        preloadedState,\r\n        applyMiddleware(thunkMiddleware,loggerMiddleware)\r\n    )\r\n}","import React from 'react';\nimport {render} from 'react-dom';\nimport './index.css';\nimport App from './components/App'\nimport {Provider} from 'react-redux'\nimport configureStore from './configureStore';\n\nconst store = configureStore();\n\nrender(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById(\"root\")\n)"],"sourceRoot":""}